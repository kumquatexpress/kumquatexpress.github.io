<!doctype html>
<html lang="en">
<head>
  	<meta charset="utf-8">
	<!-- Font family -->
	<link href='http://fonts.googleapis.com/css?family=Raleway:400,700' rel='stylesheet' type='text/css'>

	<!-- Stylesheets -->
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.2/custom/bootstrap.min.css">
	<link rel="stylesheet" href="/stylesheets/opentip.css">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/3.0.2/normalize.min.css">
	<link rel="stylesheet" href="/stylesheets/site.min.css">
	<link rel="stylesheet" href="/stylesheets/pygments.css">
	<link rel="stylesheet" href="/stylesheets/custom.css">

	<!-- Javascript external libraries -->
	<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/lettering.js/0.6.1/jquery.lettering.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/js/bootstrap.min.js"></script>
	<script src="/scripts/opentip-jquery.min.js"></script>
	<script src="/scripts/constants.js"></script>
	<script src="/scripts/app.js"></script>

	<!-- Favicons -->
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

	<title> Website Building Blocks - Part 2 |  A Slice of README</title>
</head>

<body>
	<main class="raleway">
		<div class="container" id='title-header'>
			<div class="row">
				<div class="navbar-header">
	<button type="button" class="navbar-toggle" data-toggle="offcanvas" data-target=".sidebar-nav">
	<span class="icon-bar"></span>
	<span class="icon-bar"></span>
	<span class="icon-bar"></span>
	</button>
</div>
<div class="container">
	<div class="row row-offcanvas row-offcanvas-left">
		<div class="tabbable col-xs-3 col-sm-2 sidebar-offcanvas" id="sidebar" role="navigation">
			<a class="col-sm-6 col-md-6 opentip-hover" data-text="Mission Central" href="/">
				<span class="fa-stack fa-2x top-icon">
				<i class="fa fa-circle-thin fa-stack-2x"></i>
				<i class="fa fa-home fa-stack-1x"></i>
				</span>
			</a>
			<a class="col-sm-6 col-md-6 opentip-hover" data-text="Archived Posts" href="/archive">
				<span class="fa-stack fa-2x top-icon">
				<i class="fa fa-square-o fa-stack-2x"></i>
				<i class="fa fa-book fa-stack-1x"></i>
				</span>
			</a>
			<ul class="nav nav-tabs sidebar" role="tablist">
		        
			    <li class="sidebar-tab">
			        <a href="/software" class="opentip-hover" data-text="View all posts in Software">
		            	<span class="category">Software&nbsp;&nbsp;<i class="fa fa-tag"></i></span>
		            </a>
			    </li>
			    <li class="spacer"></li>
		        
			    <li class="sidebar-tab">
			        <a href="/design" class="opentip-hover" data-text="View all posts in Design">
		            	<span class="category">Design&nbsp;&nbsp;<i class="fa fa-tag"></i></span>
		            </a>
			    </li>
			    <li class="spacer"></li>
		        
			    <li class="sidebar-tab">
			        <a href="/gadgets" class="opentip-hover" data-text="View all posts in Gadgets">
		            	<span class="category">Gadgets&nbsp;&nbsp;<i class="fa fa-tag"></i></span>
		            </a>
			    </li>
			    <li class="spacer"></li>
		        
			    <li class="sidebar-tab">
			        <a href="/misc" class="opentip-hover" data-text="View all posts in Misc">
		            	<span class="category">Misc&nbsp;&nbsp;<i class="fa fa-tag"></i></span>
		            </a>
			    </li>
			    <li class="spacer"></li>
		        
			    <li class="sidebar-tab">
			        <a href="/travel" class="opentip-hover" data-text="View all posts in Travel">
		            	<span class="category">Travel&nbsp;&nbsp;<i class="fa fa-tag"></i></span>
		            </a>
			    </li>
			    <li class="spacer"></li>
		        
			</ul>
		</div>
		<div class="col-sm-10" id="content">
			<article>
		<a class="back-archive" href="/archive"><i class="fa fa-arrow-circle-left"></i> Back to archive</a>
        <header>
            <h2>Website Building Blocks - Part 2</h2>
            <span class="icon-date"><i class="fa fa-clock-o"></i><time datetime="2015-01-22">Jan 22, 2015</time></span>
            <span class="icon-author"><i class="fa fa-user"></i> Boyang Niu</span>
            <span class="icon-category"><a href="/design/"><i class="fa fa-tag"></i>design</a></span>
        </header>
        <div class="entry raleway"><p>In the summer of 2013, I was interning as a software engineer at <a href="http://ooyala.com">Ooyala</a>. My team was responsible for site reliability, and so the work that I did mostly revolved around OS images, the PXE boot process, and managing (through software) our baremetal clusters in the data center. I write in more detail about the actual experience <a href="/">here</a>.</p>

<p>Because most of my time was spent working with low-level systems, I decided to round out my learning by focusing in detail on the website&#39;s frontend. This would involve a complete rewrite of all the content, including moving off of Drupal and switching from AWS to <a href="http://digitalocean.com">DigitalOcean</a>. The hardware migration was mostly influenced by DigitalOcean&#39;s lower monthly pricing and its easier setup process with prepared base images. I wasn&#39;t using the capabilities of Amazon and my small static website was never going to need all of the customizability that came with the VM, so I opted for a fast-booting SSD and easy DNS setup instead.</p>

<p>Now for the fun part. When I was deciding how to best revamp the site&#39;s frontend, I wanted to showcase newer technologies in a big way. During the year at school I&#39;d picked up a lot of web scraping and backend development, so I thought some of these skills would aid me in implementing a cool and newfangled frontend framework. I knew that the page would be mostly a portfolio and that it would be one single landing page, so my choice was ultimately to use some newer HTML5 technologies and the KineticJS javascript library. </p>

<p>The most important design decision I made here was to draw the entire page on a canvas element. This would turn out to be an enormous mistake later on, but I didn&#39;t realize it at the time. I also wanted the page to be responsive and fluid, so I decided to write the following without knowing how expensive it would be:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">//instantiate kineticJS</span>
<span class="nx">kineticGlobal</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">width</span><span class="p">(),</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">height</span><span class="p">());</span>

<span class="c1">//redraws all canvases to be correct size</span>
<span class="nx">$</span><span class="p">(</span><span class="nb">window</span><span class="p">).</span><span class="nx">load</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">update_and_redraw</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">update_and_redraw</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">update_global_sizes</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">winWidth</span> <span class="o">=</span> <span class="nx">width</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">winHeight</span> <span class="o">=</span> <span class="nx">height</span><span class="p">;</span>
    <span class="nx">kineticGlobal</span><span class="p">.</span><span class="nx">draw</span><span class="p">(</span><span class="nx">winWidth</span><span class="p">,</span> <span class="nx">winHeight</span><span class="p">);</span>
    <span class="nx">kineticGlobal</span><span class="p">.</span><span class="nx">setListeners</span><span class="p">();</span>
<span class="p">}</span></code></pre></div>

I thought that resizing the window and redrawing the entire page on every window resize event would be the safest way to ensure that my page was always correctly displayed. I didn't anticipate that window.resize events occur many, many times when dragging a window, and at this point in time I still didn't know what debouncing a request was. 

<div class="thumbnail" style="text-align:center;">
    <strong>State of the site - 2013</strong>
    <p>Server(Hardware) - DigitalOcean VPS <br/>
    Server(Software) - Apache <br/>
    Frontend Framework - KineticJS, HTML5</p>
</div>
</div>
</article>
<div class="row">
	
	<div class="previous-post">
		<a href=/design/2015/01/21/website-blocks/>
			<i class="fa fa-chevron-left fa-lg"></i>&nbsp;Previous: Website Building Blocks - Part 1
		</a>
	</div>
	
	
	<div class="next-post">
		<a href=/software/2015/02/10/writing-a-static-website-generator-in-go/>
			Next: Writing a Static Website Generator in Golang&nbsp;<i class="fa fa-chevron-right fa-lg"></i>
		</a>
	</div>
	
</div>
		</div>
	</div>
</div>
			</div>
		</div>
	</main>

	<footer>
		<div class="container raleway">
		    <div class="row">
		        <div class="col-lg-10 col-lg-offset-1 text-center">
		            <p class="text-muted">Boyang Niu 2014&copy; |
		            <a href="documents/resume.pdf">My resume</a>  |
		            <a href="https://github.com/kumquatexpress">My Github</a>
		            </p>
		        </div>
		    </div>
		</div>
	</footer>


	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-46797848-1', 'auto');
		ga('send', 'pageview');
	</script>
</body>

</html>